generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AutomationSetting {
  id        String    @id @default(cuid())
  enabled   Boolean   @default(false)
  updatedAt DateTime  @updatedAt
  lastRunAt DateTime?
}

model Product {
  id           String    @id @default(cuid())
  shopeeItemId String    @unique
  name         String
  sku          String?
  stock        Int       @default(0)
  price        Decimal   @default(0)
  status       String    @default("NORMAL")
  shopId       String
  updatedAt    DateTime  @updatedAt
  isAutoBump   Boolean   @default(false)
  lastBumpedAt DateTime?
  variants     Json?
}

model ShopeeOrder {
  id           String   @id @default(cuid())
  shopId       Int
  orderSn      String   @unique
  buyerName    String?
  totalAmount  Float
  status       String
  createTime   DateTime
  raw          Json?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  productNames String?
}

model ShopeeToken {
  id           String   @id @default(cuid())
  shopId       String   @unique
  shopName     String?
  accessToken  String
  refreshToken String
  expiresAt    DateTime
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model UserProfile {
  id          String   @id @default(cuid())
  name        String
  role        String   @default("Seller Pro")
  totalEarned Float    @default(0)
  updatedAt   DateTime @updatedAt
}

model WalletTransaction {
  id          String   @id @default(cuid())
  date        DateTime @default(now())
  type        String
  source      String
  referenceId String   @unique
  amount      Float
  status      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
